{"version":3,"file":"summernote.component.js","sourceRoot":"","sources":["summernote.component.ts"],"names":[],"mappings":"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","sourcesContent":["/// <reference path=\"../summernote.d.ts\" />\r\nimport * as $ from 'jquery';\r\n\r\nimport {\r\n    Component,\r\n    ElementRef,\r\n    forwardRef,\r\n    Input,\r\n    Output,\r\n    EventEmitter,\r\n    OnDestroy,\r\n    OnInit,\r\n    SecurityContext\r\n} from '@angular/core';\r\n\r\nimport {\r\n    NG_VALUE_ACCESSOR\r\n    , ControlValueAccessor\r\n} from '@angular/forms';\r\n\r\nconst SUMMERNOTE_VALUE_ACCESSOR = {\r\n    provide: NG_VALUE_ACCESSOR,\r\n    useExisting: forwardRef(() => SummernoteComponent),\r\n    multi: true\r\n};\r\n\r\n@Component({\r\n    selector: 'summernote',\r\n    template: '<div class=\"summernote\"></div>',\r\n    providers: [SUMMERNOTE_VALUE_ACCESSOR]\r\n})\r\nexport class SummernoteComponent implements OnInit, OnDestroy, ControlValueAccessor {\r\n    @Input()\r\n    set options(options: SummernoteOptions) {\r\n        this._options = options;\r\n        this.addCallbacks();\r\n        this.refreshOptions();\r\n    }\r\n\r\n    get options(): SummernoteOptions {\r\n        return this._options || {};\r\n    }\r\n\r\n    @Input()\r\n    set disabled(disabled: boolean) {\r\n        if (disabled != null) {\r\n            this._disabled = disabled;\r\n            $(this.element.nativeElement).find('.summernote').summernote(disabled ? 'disable' : 'enable');\r\n            this.refreshOptions();\r\n        }\r\n    }\r\n\r\n    get disabled(): boolean {\r\n        return this._disabled;\r\n    }\r\n\r\n    @Input() whitespaceEmpty = false;\r\n\r\n    private _empty;\r\n\r\n    @Output() emptyChange: EventEmitter<boolean> = new EventEmitter<boolean>();\r\n\r\n    get empty() {\r\n        return this._empty;\r\n    }\r\n    set empty(value: boolean) {\r\n        if (this._empty != value) {\r\n            this._empty = value;\r\n            this.emptyChange.emit(value);\r\n        }\r\n    }\r\n\r\n    @Output() textChange: EventEmitter<string> = new EventEmitter<string>();\r\n\r\n    private _disabled: boolean = false;\r\n\r\n    private _options: SummernoteOptions;\r\n\r\n    private onTouched = () => { };\r\n    private onChange: (value: string) => void = () => { };\r\n\r\n    constructor(private element: ElementRef) {\r\n\r\n    }\r\n    private _value: string;\r\n\r\n    set value(value: string) {\r\n        this._value = value;\r\n    }\r\n    get value(): string {\r\n        return this._value;\r\n    }\r\n\r\n    private refreshOptions() {\r\n        $(this.element.nativeElement).find('.summernote').summernote(this.options);\r\n        if (this.options.tooltip != undefined && !this.options.tooltip)\r\n            (<any>$(this.element.nativeElement).find('.note-editor button.note-btn')).tooltip('destroy');\r\n    }\r\n\r\n    private addCallbacks() {\r\n        this.options.callbacks = {\r\n            onChange: (contents, $editable) => {\r\n                this.refreshEmpty();\r\n                this.onChange(contents);\r\n            },\r\n            onBlur: () => {\r\n                this.onTouched();\r\n            }\r\n        };\r\n    }\r\n\r\n    private refreshEmpty() {\r\n        let summernote = $(this.element.nativeElement).find('.summernote');\r\n        this.empty = <boolean>(<any>summernote.summernote('isEmpty'))\r\n        if (this.whitespaceEmpty)\r\n            this.empty = this.empty || summernote.summernote('code').replace(/<\\/?[^>]+(>|$)/g, \"\").replace(/&nbsp;/g,'').trim() === '';\r\n    }\r\n\r\n    ngOnInit() {\r\n        if (this.options == null) {\r\n            this.options = {};\r\n        }\r\n        this.refreshEmpty();\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        $(this.element.nativeElement).find('.summernote').summernote('destroy');\r\n    }\r\n\r\n    writeValue(code: string) {\r\n        this.value = code;\r\n\r\n        $(this.element.nativeElement).find('.summernote').summernote('code', code);\r\n        this.refreshEmpty();\r\n    }\r\n\r\n    registerOnChange(fn: any) {\r\n        this.onChange = fn;\r\n    }\r\n\r\n    registerOnTouched(fn: any) {\r\n        this.onTouched = fn;\r\n    }\r\n}"]}